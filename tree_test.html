<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
	<title>Dynatree - HTML4 strict</title>
	<script src="./js/jquery.js" type="text/javascript"></script>
	<script src="./js/jquery-ui.custom.js" type="text/javascript"></script>
	<script src="./js/jquery.cookie.js" type="text/javascript"></script>
	<link href="./css/skin-vista/ui.dynatree.css" rel="stylesheet" type="text/css" id="skinSheet">
	<script src="./js/jquery.dynatree.js" type="text/javascript"></script>
<script type="text/javascript"><!--
$(function(){
	// --- Initialize first Dynatree -------------------------------------------
	$("#tree").dynatree({
		//children: data,
		onActivate: function(node) {
			//$("#echoActive").text(node.data.title + "(" + node.data.key + ")");
		},
		onDeactivate: function(node) {
			//$("#echoActive").text("-");
		},
		dnd: {
			onDragStart: function(node) {
				//logMsg("tree.onDragStart(%o)", node);
				return true;
			},
			onDragStop: function(node) {
				//logMsg("tree.onDragStop(%o)", node);
			},
			autoExpandMS: 1000,
			preventVoidMoves: true, // Prevent dropping nodes 'before self', etc.
			onDragEnter: function(node, sourceNode) {
				if (node.data.isFolder) {
					return true;
				};
				return false;
			},
			onDragOver: function(node, sourceNode, hitMode) {
				//logMsg("tree.onDragOver(%o, %o, %o)", node, sourceNode, hitMode);
				if(node.isDescendantOf(sourceNode)){
					return false;
				}
			},
			onDrop: function(node, sourceNode, hitMode, ui, draggable) {
				//logMsg("tree.onDrop(%o, %o, %s)", node, sourceNode, hitMode);
				if (!node.data.isFolder) {
					draggable = false;
				}else{
					sourceNode.move(node, hitMode);
					if (!node.bExpanded) {
						node.toggleExpand();
					};
				}
			},
			onDragLeave: function(node, sourceNode) {
				//logMsg("tree.onDragLeave(%o, %o)", node, sourceNode);
			}
		}
	});
	var rootNode = $("#tree").dynatree("getRoot");
	var childNode = rootNode.addChild({
		title: "Child node 1",
		isFolder: true, 
		expand: true 
	});


	childNode.addChild({
		title: "Child node 2",
		isFolder: false
	});

	childNode.addChild({
		title: "Child node 2",
		isFolder: false
	});
	childNode.addChild({
		title: "Child node 2",
		isFolder: false
	});
	childNode.addChild({
		title: "Child node 2",
		isFolder: false
	});


	rootNode.addChild({
		title: "Child node 2",
		isFolder: true
	});

});
--></script>
</head>

<body>
	<div id="tree">  </div>
</body>
<script type="text/javascript">

</script>
</html>
